window.eoxiaJS.wpshop={},window.eoxiaJS.wpshopFrontend={},window.eoxiaJS.wpshop.init=function(){jQuery(".wps-sync").length&&jQuery(".wps-sync").each(function(){var e={action:"check_sync_status",wp_id:jQuery(this).find(".button-synchro").data("wp-id"),type:jQuery(this).find(".button-synchro").data("type")};window.eoxiaJS.loader.display(jQuery(this));var o=jQuery(this);jQuery.post(ajaxurl,e,function(e){window.eoxiaJS.loader.remove(o),o.replaceWith(e.data.view),e.data.status&&"0x1"==e.data.status.status_code&&jQuery('.table-row[data-id="'+e.data.id+'"] .reference-id li:last').remove()}).fail(function(){window.eoxiaJS.loader.remove(o),o.find(".statut").attr("aria-label","500 (Internal Server Error)"),o.find(".statut").addClass("statut-red")})});var e={action:"check_erp_statut",_wpnonce:scriptParams.check_erp_statut_nonce};jQuery.post(ajaxurl,e,function(e){!e.data.statut&&e.data.view&&jQuery("body").append(e.data.view)})},window.eoxiaJS.wpshop.API={},window.eoxiaJS.wpshop.API.init=function(){},window.eoxiaJS.wpshop.API.generatedAPIKey=function(e,o){e.closest(".wpshop-fields").replaceWith(o.data.view)},window.eoxiaJS.wpshop.thirdParties={},window.eoxiaJS.wpshop.thirdParties.init=function(){window.eoxiaJS.wpshop.thirdParties.event()},window.eoxiaJS.wpshop.thirdParties.event=function(){jQuery(document).on("click","#wps-third-party-contact .add-contact",window.eoxiaJS.wpshop.thirdParties.toggleContactFormNew),jQuery(document).on("click",".wpeo-autocomplete.search-contact .autocomplete-search-list .autocomplete-result",window.eoxiaJS.wpshop.thirdParties.putContactID)},window.eoxiaJS.wpshop.thirdParties.toggleContactFormNew=function(){jQuery("#wps-third-party-contact .row.new").toggle()},window.eoxiaJS.wpshop.thirdParties.putContactID=function(){jQuery(this).closest(".wpeo-autocomplete").find(".button-associate-contact").attr("data-contact-id",jQuery(this).data("id")),jQuery(this).closest(".wpeo-autocomplete").find("input#search-contact").val(jQuery(this).data("result"))},window.eoxiaJS.wpshop.thirdParties.loaddedTitleEdit=function(e,o){e.closest("h2").html(o.data.view)},window.eoxiaJS.wpshop.thirdParties.savedThird=function(e,o){e.closest("h2").html(o.data.view)},window.eoxiaJS.wpshop.thirdParties.loaddedBillingAddressSuccess=function(e,o){e.closest(".inside").html(o.data.view)},window.eoxiaJS.wpshop.thirdParties.savedBillingAddressSuccess=function(e,o){e.closest(".inside").html(o.data.view)},window.eoxiaJS.wpshop.thirdParties.loaddedContactSuccess=function(e,o){e.closest("tr").replaceWith(o.data.view)},window.eoxiaJS.wpshop.thirdParties.savedContact=function(e,o){e.closest(".inside").html(o.data.view)},window.eoxiaJS.wpshop.thirdParties.associatedContactSuccess=function(e,o){e.closest(".inside").html(o.data.view)},window.eoxiaJS.wpshop.tools={},window.eoxiaJS.wpshop.tools.init=function(){jQuery(document).on("click",".import-third-party .wpeo-button.button-primary",window.eoxiaJS.wpshop.tools.importThirdParty),jQuery(document).on("click",".import-product .wpeo-button.button-primary",window.eoxiaJS.wpshop.tools.importProduct)},window.eoxiaJS.wpshop.tools.importThirdParty=function(e){var o=new FormData;e.preventDefault(),o.append("file",jQuery(".import-third-party input[type=file]")[0].files[0]),o.append("action","import_third_party"),o.append("_wpnonce",jQuery(this).closest("form").find('input[name="_wpnonce"]').val()),o.append("index_element",0),window.eoxiaJS.wpshop.tools.requestImportThirdParty(o)},window.eoxiaJS.wpshop.tools.importProduct=function(e){var o=new FormData;e.preventDefault(),o.append("file",jQuery(".import-product input[type=file]")[0].files[0]),o.append("action","import_third_party"),o.append("_wpnonce",jQuery(this).closest("form").find('input[name="_wpnonce"]').val()),o.append("index_element",0),window.eoxiaJS.wpshop.tools.requestImportProduct(o)},window.eoxiaJS.wpshop.tools.requestImportThirdParty=function(e){jQuery.ajax({url:ajaxurl,data:e,processData:!1,contentType:!1,type:"POST",beforeSend:function(){window.eoxiaJS.loader.display(jQuery(".import-third-party .wpeo-button")),jQuery(".import-details").html("In progress")},success:function(e){var o=new FormData;e.success&&(jQuery(".import-third-party progress").attr("max",e.data.count_element),jQuery(".import-third-party progress").val(e.data.index_element/e.data.count_element*e.data.count_element),e.data.end?(jQuery(".import-detail").html("Importation terminé"),window.eoxiaJS.loader.remove(jQuery(".import-third-party .wpeo-button"))):(o.append("action","import_third_party"),o.append("_wpnonce",jQuery(".import-third-party").find('input[name="_wpnonce"]').val()),o.append("path_to_json",e.data.path_to_json),o.append("index_element",e.data.index_element),o.append("count_element",e.data.count_element),jQuery(".import-detail").html("Progress"),window.eoxiaJS.wpshop.tools.requestImport(o)))}})},window.eoxiaJS.wpshop.tools.requestImportProduct=function(e){jQuery.ajax({url:ajaxurl,data:e,processData:!1,contentType:!1,type:"POST",beforeSend:function(){window.eoxiaJS.loader.display(jQuery(".import-product .wpeo-button")),jQuery(".import-details").html("In progress")},success:function(e){var o=new FormData;e.success&&(jQuery(".import-product progress").attr("max",e.data.count_element),jQuery(".import-product progress").val(e.data.index_element/e.data.count_element*e.data.count_element),e.data.end?(jQuery(".import-detail").html("Importation terminé"),window.eoxiaJS.loader.remove(jQuery(".import-product .wpeo-button"))):(o.append("action","import_product"),o.append("_wpnonce",jQuery(".import-product").find('input[name="_wpnonce"]').val()),o.append("path_to_json",e.data.path_to_json),o.append("index_element",e.data.index_element),o.append("count_element",e.data.count_element),jQuery(".import-detail").html("Progress"),window.eoxiaJS.wpshop.tools.requestImportProduct(o)))}})},window.eoxiaJS.wpshop.product={},window.eoxiaJS.wpshop.product.init=function(){window.eoxiaJS.wpshop.product.event()},window.eoxiaJS.wpshop.product.event=function(){jQuery(document).on("wps-change-toggle",".stock-field .toggle",window.eoxiaJS.wpshop.product.displayBlockStock),jQuery(document).on("click",'.wps-list-product .table-header input[type="checkbox"]',window.eoxiaJS.wpshop.product.checkAll),jQuery(document).on("click",".button-apply",window.eoxiaJS.wpshop.product.apply),jQuery(document).ready(window.eoxiaJS.wpshop.product.autoSynchro),jQuery(".similar-product").select2({ajax:{url:scriptParams.url+"/wp-json/wpshop/v2/product/search",data:function(e){return{s:e.term}},processResults:function(e){var o=[];for(var t in e){var i={id:e[t].id,text:e[t].title};o.push(i)}return{results:o}},cache:!0},minimumInputLength:1})},window.eoxiaJS.wpshop.product.displayBlockStock=function(e,o){o?jQuery(".stock-block").fadeIn():jQuery(".stock-block").fadeOut()},window.eoxiaJS.wpshop.product.checkAll=function(){jQuery(this).is(":checked")?jQuery('.wps-list-product .table-row:not(.table-header) input[type="checkbox"]').attr("checked",!0):jQuery('.wps-list-product .table-row:not(.table-header) input[type="checkbox"]').attr("checked",!1)},window.eoxiaJS.wpshop.product.apply=function(){"quick-edit"===jQuery(".select-apply").val()&&jQuery(".wps-list-product .table-row:not(.table-header)").each(function(){jQuery(this).find('input[type="checkbox"]').is(":checked")&&jQuery(this).find('.action-attribute[data-action="change_mode"]').click()})},window.eoxiaJS.wpshop.product.autoSynchro=function(e){jQuery(this).find('.button-synchro[data-entry-id="1"]')},window.eoxiaJS.wpshop.product.changeMode=function(e,o){jQuery(e).closest("div.table-row").replaceWith(o.data.view)},window.eoxiaJS.wpshop.settings={},window.eoxiaJS.wpshop.settings.init=function(){},window.eoxiaJS.wpshop.settings.dismiss=function(e,o){jQuery(".notice-erp").fadeOut()},window.eoxiaJS.wpshop.doliAssociate={},window.eoxiaJS.wpshop.doliAssociate.init=function(){jQuery(document).on("keyup",".synchro-single .filter-entry",window.eoxiaJS.wpshop.doliAssociate.filter),jQuery(document).on("click",".synchro-single li",window.eoxiaJS.wpshop.doliAssociate.clickEntry)},window.eoxiaJS.wpshop.doliAssociate.filter=function(e){var o=jQuery(".synchro-single ul.select li");o.show();for(var t=jQuery(this).val().toLowerCase(),i=0;i<o.length;i++)-1==jQuery(o[i]).text().toLowerCase().indexOf(t)&&jQuery(o[i]).hide()},window.eoxiaJS.wpshop.doliAssociate.clickEntry=function(e){jQuery(".synchro-single li.active").removeClass("active"),jQuery(this).addClass("active"),jQuery('.synchro-single input[name="entry_id"]').val(jQuery(this).data("id"))},window.eoxiaJS.wpshop.doliAssociate.goSync=function(e){return jQuery(e).closest(".wpeo-modal").addClass("modal-force-display"),!0},window.eoxiaJS.wpshop.doliAssociate.openModalCompareSuccess=function(e,o){o.data.error?jQuery(".wpeo-modal.modal-active ul.select").css("border-color","red"):(jQuery(".wpeo-modal.modal-active .modal-content").html(o.data.view),jQuery(".wpeo-modal.modal-active .modal-footer").html(o.data.footer_view))},window.eoxiaJS.wpshop.doliAssociate.associatedEntrySuccess=function(e,o){jQuery(".wpeo-modal.modal-active .modal-content").html(o.data.view),jQuery(".wpeo-modal.modal-active .modal-footer").html(o.data.modal_footer),jQuery('.table-row[data-id="'+o.data.id+'"]').replaceWith(o.data.line_view)},window.eoxiaJS.wpshop.doliOrder={},window.eoxiaJS.wpshop.doliOrder.init=function(){},window.eoxiaJS.wpshop.doliOrder.markedAsDelivery=function(e,o){jQuery(".wps-shipment-tracking").replaceWith(o.data.view)},window.eoxiaJS.wpshop.doliSync={},window.eoxiaJS.wpshop.doliSync.completed=!1,window.eoxiaJS.wpshop.doliSync.init=function(){jQuery(document).on("modal-opened",".modal-sync",function(){0<jQuery(".waiting-item").length&&(window.eoxiaJS.wpshop.doliSync.declareUpdateForm(),window.eoxiaJS.wpshop.doliSync.requestUpdate(),window.addEventListener("beforeunload",window.eoxiaJS.wpshop.doliSync.safeExit))})},window.eoxiaJS.wpshop.doliSync.declareUpdateForm=function(){jQuery(".item").find("form").ajaxForm({dataType:"json",success:function(e,o,t,i){e.data.updateComplete?window.eoxiaJS.wpshop.doliSync.completed||(i.find(".item-stats").html(e.data.progression),i.find('input[name="done_number"]').val(e.data.doneElementNumber),i.find(".item-progression").css("width",e.data.progressionPerCent+"%"),e.data.done&&(i.closest(".item").removeClass("waiting-item"),i.closest(".item").removeClass("in-progress-item"),i.closest(".item").addClass("done-item"),i.find(".item-stats").html(e.data.doneDescription)),window.eoxiaJS.wpshop.doliSync.completed=!0,jQuery(".general-message").html(e.data.doneDescription),window.removeEventListener("beforeunload",window.eoxiaJS.wpshop.doliSync.safeExit),jQuery(".wpeo-modal.modal-active").removeClass("modal-force-display")):(i.find(".item-stats").html(e.data.progression),i.find('input[name="done_number"]').val(e.data.doneElementNumber),i.find(".item-progression").css("width",e.data.progressionPerCent+"%"),e.data.done&&(i.closest(".item").removeClass("waiting-item"),i.closest(".item").removeClass("in-progress-item"),i.closest(".item").addClass("done-item"),i.find(".item-stats").html(e.data.doneDescription))),window.eoxiaJS.wpshop.doliSync.requestUpdate()}})},window.eoxiaJS.wpshop.doliSync.requestUpdate=function(){var e;window.eoxiaJS.wpshop.doliSync.completed||(e="#"+jQuery(".waiting-item:first").attr("id"),jQuery(e).addClass("in-progress-item"),jQuery(e).find("form").submit())},window.eoxiaJS.wpshop.doliSync.safeExit=function(e){var o=taskManager.wpshopconfirmExit;if(taskManager.wpshopUrlPage===e.currentTarget.adminpage)return e.returnValue=o},window.eoxiaJS.wpshop.doliSync.syncEntrySuccess=function(e,o){var t=jQuery(".wpeo-modal.modal-active");0<t.length?(t.addClass("modal-force-display"),t.find(".modal-content").html(o.data.modal_view),t.find(".modal-footer").html(o.data.modal_footer)):0<jQuery(e).closest(".table-row").length&&jQuery(e).closest(".table-row").replaceWith(o.data.item_view)};